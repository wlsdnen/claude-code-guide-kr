# 비용 최적화

[← 목차로 돌아가기](../README.md) · [이전: Dotfiles](11-dotfiles.md)

---

전략적 모델 선택과 캐싱을 조합하면 **50~90% 비용 절감**이 가능합니다.

## 모델별 역할 분담

| 모델 | 용도 | 비용 |
|------|------|------|
| **Haiku 4.5** | 빠른 단순 작업 (파일 읽기, 기본 편집) | Sonnet의 1/3 |
| **Sonnet 4.5** | 일상 개발 (최적 능력/비용 균형) | 기준 |
| **Opus 4.6** | 복잡한 아키텍처, 멀티파일 추론 | Sonnet의 ~1.7x |

## 최적화 전략 4가지

| 전략 | 절감률 | 방법 |
|------|--------|------|
| **컨텍스트 관리** | 40~80% | `/model haiku` 전환, `/compact` 압축, 간결한 CLAUDE.md |
| **프롬프트 캐싱** | 90% | CLAUDE.md/시스템 프롬프트 자동 캐싱. 반복 내용은 원가의 10% |
| **Batch API** | 50% | 대량 분석, 비긴급 리팩토링. 모든 모델에서 50% 할인 |
| **팀 최적화** | 비례 | 에이전트 수에 비례 소비. 작업 완료 후 팀 즉시 정리 |

## 일상 워크플로우 최적화

```
1. 탐색/읽기 → /model haiku (간단한 파일 탐색)
2. 구현/디버깅 → /model sonnet (일상 개발)
3. 설계/리뷰 → /model opus (복잡한 의사결정)
4. 세션 길어지면 → /compact (컨텍스트 압축)
5. 새 주제 → /clear (깨끗한 시작)
```

## 비용 모니터링

- `/cost` — 현재 세션 토큰 사용량 확인
- `/stats` — 사용 패턴 분석
- 평균 $6/day, 90th percentile $12/day

## CLAUDE.md와 비용의 관계

간결한 CLAUDE.md가 비용을 줄이는 이유:

- CLAUDE.md는 **매 메시지마다** 컨텍스트에 포함
- 300줄 CLAUDE.md vs 60줄 → 5x 토큰 차이가 **매 턴마다** 누적
- 프롬프트 캐싱이 반복 비용을 90% 줄이지만, 처음 로드 비용은 여전히 발생

---

[다음: 커뮤니티 사례 & 팁 →](13-community.md)
